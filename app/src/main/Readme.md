# Android Калькулятор

Простое Android-приложение для выполнения базовых арифметических операций: сложение, вычитание, умножение и деление.

## Внешний вид приложения

<img width="227" height="506" alt="image" src="https://github.com/user-attachments/assets/a8633213-d230-4afc-b219-50c6f70de19c" />

## Интерфейс приложения

### Кнопки цифр:
- **0-9** — ввод цифр для составления числа 

### Кнопки операторов:
- **+** (buttonPlus) — сложение (оранжевая кнопка)
- **-** (buttonMinus) — вычитание (оранжевая кнопка)
- **×** (buttonMultiply) — умножение (оранжевая кнопка)
- **÷** (buttonDivide) — деление (оранжевая кнопка)

### Управляющие кнопки:
- **=** (buttonEqually) — вычислить результат (зеленая кнопка)
- **C** (buttonClear) — очистить экран (красная кнопка)

### Дисплей:
- **result_text_view** — текстовое поле для отображения введенных данных и результата (белый фон, выравнивание текста справа)

## Алгоритм обработки данных

### 1. Ввод данных (onCreate)

**Инициализация компонентов:**
val tvResult: TextView = findViewById(R.id.result_text_view)
val buttonNumber = listOf(R.id.button0, R.id.button1, ..., R.id.button9)

**Обработка нажатий цифровых кнопок:**
- При нажатии на любую цифру (0-9), текст кнопки **конкатенируется** к существующему тексту в `tvResult`
- Пример: если на экране "12", после нажатия "3" → "123"

**Обработка операторов (+, -, *, /):**
- Оператор добавляется как символ к строке
- Пример: "5" → нажатие "+" → "5+"

**Кнопка Clear (C):**
- Полностью очищает дисплей, устанавливая текст в пустую строку

### 2. Вычисление результата (calculateExpression)

Когда пользователь нажимает **"="**, запускается функция `calculateExpression(expression: String)`:

#### Шаг 1: Валидация входных данных
if (expression.isEmpty()) return " "- Проверяет, что строка не пустая

#### Шаг 2: Поиск оператора
for (i in expression.indices){
val char = expression[i]
if (char == '+' || char == '-' || char == '/' || char == '*'){
operator = char
operatorIndex = i
break
}
}
- **Линейный поиск** по строке символ за символом
- Находит **первый** оператор и его позицию
- Сохраняет индекс для разделения строки на две части

#### Шаг 3: Парсинг чисел
val firstNumstr = expression.substring(0, operatorIndex)
val secondNumstr = expression.substring(operatorIndex + 1)
- **Разделяет** строку на две подстроки по индексу оператора:
  - `firstNumstr` — все символы **до** оператора (первое число)
  - `secondNumstr` — все символы **после** оператора (второе число)
- Пример: "15+7" → `firstNumstr = "15"`, `operator = '+'`, `secondNumstr = "7"`

#### Шаг 4: Преобразование типов
val firstNum = firstNumstr.toDoubleOrNull()
val secondNum = secondNumstr.toDoubleOrNull()
- Конвертирует строки в `Double` для поддержки дробных чисел
- Использует `toDoubleOrNull()` для безопасного преобразования
- Если преобразование невозможно → возвращает сообщение об ошибке

#### Шаг 5: Выполнение операции
val result = when (operator){
'+' -> firstNum + secondNum
'-' -> firstNum - secondNum
'*' -> firstNum * secondNum
'/' -> {
if (secondNum == 0.0){
return "Деление на 0 запрещено, возвращайтесь в школу!"
}
firstNum / secondNum
}
else -> return "Так нельзя делать!"
}
- **Pattern matching** через `when` для выбора арифметической операции
- **Специальная обработка деления**: проверка на деление на ноль

#### Шаг 6: Форматирование вывода
return if (result % 1 == 0.0) {
result.toInt().toString()
} else {
result.toString()
}- Проверяет, является ли результат целым числом (`result % 1 == 0.0`)
- Если целое → преобразует в `Int` и убирает ".0" (5.0 → "5")
- Если дробное → оставляет как есть (5.5 → "5.5")

### Обработка ошибок

Приложение обрабатывает следующие случаи:

|         Ошибка        |           Сообщение           |                         Причина                        |
|-----------------------|-------------------------------|--------------------------------------------------------|
|      Пустой ввод      |             `" "`             |                   Нажатие "=" без данных               |
|    Некорректный ввод  | `"Введите данные корректно!"` | Оператор без одного из чисел (например, "+5" или "5+") |
| Ошибка преобразования |  `"Ошибка преобразования..."` |                 Некорректные символы в числах          |
|    Деление на ноль    | `"Деление на 0 запрещено..."` |                     Попытка деления на 0               |

## Запуск приложения

1. Открыть проект в Android Studio
2. Подключить Android-устройство или запустить эмулятор 
3. Нажать **Run** (`Shift+F10`) или кнопку ▶️
4. Приложение установится и запустится автоматически

## Известные ограничения

- Поддержка **только одного оператора** за раз (нельзя вводить "2+3+4")
- Нет поддержки **скобок** для изменения приоритета операций
- Нет поддержки **отрицательных чисел** в начале выражения
- Нет кнопки **десятичной точки** для ввода дробных чисел вручную
- При повторном нажатии операторов создается некорректное выражение

## Возможные улучшения

- Добавить кнопку "." для ввода десятичных дробей
- Реализовать поддержку цепочки операций (2+3+4)
- Добавить историю вычислений
- Реализовать удаление последнего символа (Backspace)
- Добавить скобки и приоритет операций

## Технические детали

- **Язык:** Kotlin
- **Цветовая схема:** Graphic Design (фиолетовый, оранжевый, зеленый, красный)

## Автор

Шаимов Богдан  
Группа: ИКС-431  
Дата: Октябрь 2025

